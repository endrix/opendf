#include <systemc.h>
#include <tlm.h>
#include "sched_DispYUV.h"

#ifdef __cplusplus
extern "C" {
#endif
/* Generated by CIL v. 1.3.6 */
/* print_CIL_Input is false */

struct DispYUV_variables {
   int e ;
   int x ;
   int y ;
   int compare ;
   int fcount ;
   int ysize ;
   int lastTime ;
   int frame ;
   int picture ;
   int uvwidth ;
   int fd ;
   int uvsize ;
   int nextc ;
   int yframe[25344] ;
   int uframe[6336] ;
   int vframe[6336] ;
};
void libcal_printf(char const   *format  , ...) ;
// To enable traces, change 1 by 0 in the #if below
#if 1
#define libcal_printf //
#endif
int currentSystemTime(void) ;
int openFile(char *file_name ) ;
void picture_displayImage(void) ;
void picture_setPixel(int x , int y , int r , int g , int b ) ;
int readByte(int fd ) ;
int JFrame(char *title ) ;
int Picture(int width , int height ) ;
int DispYUV_function_Nuv(struct DispYUV_variables *_actor_variables , int Ny , int n ) ;
void DispYUV_function_readFrame(struct DispYUV_variables *_actor_variables ) ;
void DispYUV_untagged_action_0(struct DispYUV_variables *_actor_variables , int macroblock[384] ) ;

#ifdef __cplusplus
}
#endif

void sched_DispYUV::process() {
/* Generated by CIL v. 1.3.6 */
/* print_CIL_Input is false */

 
{ int _token_1 ;
  int i ;
  int _list_4[384] ;
  int _call_5 ;
  struct DispYUV_variables *_actor_variables ;
  int _call_7 ;
  int _call_8 ;
  int _call_9 ;
  int _call_10 ;

  {
  _actor_variables = (struct DispYUV_variables *)malloc(152116);
  _actor_variables->compare = 1;
  _actor_variables->e = 0;
  _actor_variables->fcount = 1;
  _call_7 = openFile("data/foreman_qcif_30.yuv");
  _actor_variables->fd = _call_7;
  _call_8 = JFrame("Foreman QCIF");
  _actor_variables->frame = _call_8;
  _actor_variables->lastTime = 0;
  _call_9 = readByte(_actor_variables->fd);
  _actor_variables->nextc = _call_9;
  _call_10 = Picture(176, 144);
  _actor_variables->picture = _call_10;
  i = 0;
  while (i < 6336) {
    _actor_variables->uframe[1 * i + 0] = 0;
    i ++;
  }
  _actor_variables->uvsize = 6336;
  _actor_variables->uvwidth = 88;
  i = 0;
  while (i < 6336) {
    _actor_variables->vframe[1 * i + 0] = 0;
    i ++;
  }
  _actor_variables->x = 0;
  _actor_variables->y = 0;
  i = 0;
  while (i < 25344) {
    _actor_variables->yframe[1 * i + 0] = 0;
    i ++;
  }
  _actor_variables->ysize = 25344;
  while (1) {
    i = 0;
    while (i < 384) {
      libcal_printf("action DispYUV_untagged_action_0: get from B\n");
      _call_5 = B->get();
      _token_1 = _call_5;
      libcal_printf("action DispYUV_untagged_action_0: got %i from B\n", _token_1);
      _list_4[1 * i + 0] = _token_1;
      i ++;
    }
    DispYUV_untagged_action_0(_actor_variables, _list_4);
  }
}
}

}
