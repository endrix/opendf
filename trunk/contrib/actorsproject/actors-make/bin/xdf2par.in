#! /bin/sh
: ${ACTORS_BINDIR:=@bindir@}
: ${ACTORS_XSLDIR:=@xsldir@}

# Generate (possibly) new parameters (*.par.new) from xdf
${ACTORS_BINDIR}/saxon8 $1 ${ACTORS_XSLDIR}/generateInstanceParameters.xsl

# Update old parameters (*.par) if changed
newparams=`ls *.par.new 2> /dev/null`
for newp in $newparams ; do
  oldp=`basename $newp .new`
  if diff $oldp $newp > /dev/null 2> /dev/null; then
    # old and new are the same
    rm $newp
  else
    # update old .par using new one
    mv $newp $oldp
  fi
done
