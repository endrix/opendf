#include <systemc.h>
#include <tlm.h>
#include "sched_MPEG4_mgnt_Framebuf.h"

#ifdef __cplusplus
extern "C" {
#endif
/* Generated by CIL v. 1.3.6 */
/* print_CIL_Input is false */

struct MPEG4_mgnt_Framebuf_variables {
   int buf[3322176] ;
};
void libcal_printf(char const   *format  , ...) ;
// To enable traces, change 1 by 0 in the #if below
#if 1
#define libcal_printf //
#endif
int currentSystemTime(void) ;
int openFile(char *file_name ) ;
void picture_displayImage(void) ;
void picture_setPixel(int x , int y , int r , int g , int b ) ;
int readByte(int fd ) ;
int JFrame(char *title ) ;
int Picture(int width , int height ) ;
void MPEG4_mgnt_Framebuf_untagged_action_0(struct MPEG4_mgnt_Framebuf_variables *_actor_variables ,
                                           int a , int *RD ) ;
void MPEG4_mgnt_Framebuf_untagged_action_1(struct MPEG4_mgnt_Framebuf_variables *_actor_variables ,
                                           int a , int d ) ;

#ifdef __cplusplus
}
#endif

void sched_MPEG4_mgnt_Framebuf::process() {
/* Generated by CIL v. 1.3.6 */
/* print_CIL_Input is false */

 
{ int _token_1 ;
  int _token_2 ;
  int _token_3 ;
  int _out_1 ;
  int _call_6 ;
  int _call_7 ;
  int _call_8 ;
  struct MPEG4_mgnt_Framebuf_variables *_actor_variables ;
  int i ;

  {
  _actor_variables = (struct MPEG4_mgnt_Framebuf_variables *)malloc(13288704);
  i = 0;
  while (i < 3322176) {
    _actor_variables->buf[1 * i + 0] = 0;
    i ++;
  }
  while (1) {
    if (RA->used() >= 1) {
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_0: get from RA\n");
      _call_6 = RA->get();
      _token_3 = _call_6;
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_0: got %i from RA\n",
                    _token_3);
      MPEG4_mgnt_Framebuf_untagged_action_0(_actor_variables, _token_3, & _out_1);
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_0: put value %i to RD\n",
                    _out_1);
      RD->put(_out_1);
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_0: put to RD OK\n");
    } else {
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_1: get from WA\n");
      _call_7 = WA->get();
      _token_1 = _call_7;
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_1: got %i from WA\n",
                    _token_1);
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_1: get from WD\n");
      _call_8 = WD->get();
      _token_2 = _call_8;
      libcal_printf("action MPEG4_mgnt_Framebuf_untagged_action_1: got %i from WD\n",
                    _token_2);
      MPEG4_mgnt_Framebuf_untagged_action_1(_actor_variables, _token_1, _token_2);
    }
  }
}
}

}
