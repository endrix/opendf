#include <systemc.h>
#include <tlm.h>
#include "sched_MPEG4_algo_DCRaddressing_16x16.h"

#ifdef __cplusplus
extern "C" {
#endif
/* Generated by CIL v. 1.3.6 */
/* print_CIL_Input is false */

struct MPEG4_algo_DCRaddressing_16x16_variables {
   int BUF_SIZE ;
   int ptr_left ;
   int mbwidth ;
   int ptr_above ;
   int left_edge ;
   int mbx ;
   int comp ;
   int ptr_above_left ;
   int top_edge ;
   int ptr ;
   int coded[492] ;
};
void libcal_printf(char const   *format  , ...) ;
// To enable traces, change 1 by 0 in the #if below
#if 1
#define libcal_printf //
#endif
int currentSystemTime(void) ;
int openFile(char *file_name ) ;
void picture_displayImage(void) ;
void picture_setPixel(int x , int y , int r , int g , int b ) ;
int readByte(int fd ) ;
int JFrame(char *title ) ;
int Picture(int width , int height ) ;
void MPEG4_algo_DCRaddressing_16x16_advance(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ) ;
int MPEG4_algo_DCRaddressing_16x16_function_access(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                                   int p , int c ) ;
int MPEG4_algo_DCRaddressing_16x16_function_decrement(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                                      int p ) ;
void MPEG4_algo_DCRaddressing_16x16_geth(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                         int h ) ;
void MPEG4_algo_DCRaddressing_16x16_getw(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                         int w ) ;
void MPEG4_algo_DCRaddressing_16x16_predict(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                            int *A , int *B , int *C ) ;
void MPEG4_algo_DCRaddressing_16x16_predict_dot_b0(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                                   int *A , int *B , int *C ) ;
void MPEG4_algo_DCRaddressing_16x16_predict_dot_b1(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                                   int *A , int *B , int *C ) ;
void MPEG4_algo_DCRaddressing_16x16_predict_dot_b2(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                                   int *A , int *B , int *C ) ;
void MPEG4_algo_DCRaddressing_16x16_read_dot_intra(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                                   int type ) ;
void MPEG4_algo_DCRaddressing_16x16_read_dot_other(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                                   int type ) ;
void MPEG4_algo_DCRaddressing_16x16_start(struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ,
                                          int cmd ) ;

#ifdef __cplusplus
}
#endif

void sched_MPEG4_algo_DCRaddressing_16x16::process() {
/* Generated by CIL v. 1.3.6 */
/* print_CIL_Input is false */

 
{ int fsm_state ;
  int _token_1 ;
  int _token_2 ;
  int _out_1 ;
  int _out_2 ;
  int _out_3 ;
  int _out_4 ;
  int _out_5 ;
  int _out_6 ;
  int _out_7 ;
  int _out_8 ;
  int _out_9 ;
  int _out_10 ;
  int _out_11 ;
  int _out_12 ;
  int _token_3 ;
  int _token_4 ;
  int _token_5 ;
  int _call_20 ;
  int _call_21 ;
  int _call_22 ;
  int _call_23 ;
  int _call_24 ;
  struct MPEG4_algo_DCRaddressing_16x16_variables *_actor_variables ;
  int i ;

  {
  _actor_variables = (struct MPEG4_algo_DCRaddressing_16x16_variables *)malloc(2008);
  _actor_variables->BUF_SIZE = 123;
  i = 0;
  while (i < 492) {
    _actor_variables->coded[1 * i + 0] = 0;
    i ++;
  }
  _actor_variables->comp = 0;
  _actor_variables->mbwidth = 0;
  _actor_variables->mbx = 0;
  _actor_variables->top_edge = 1;
  fsm_state = 1;
  while (1) {
    switch (fsm_state) {
    case 1: 
    {
    if ((btype->peek() & 2048) != 0) {
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_start: get from btype\n");
      _call_20 = btype->get();
      _token_5 = _call_20;
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_start: got %i from btype\n",
                    _token_5);
      MPEG4_algo_DCRaddressing_16x16_start(_actor_variables, _token_5);
      fsm_state = 4;
    } else {
      if ((btype->peek() & 1024) != 0) {
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_read_dot_intra: get from btype\n");
        _call_21 = btype->get();
        _token_4 = _call_21;
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_read_dot_intra: got %i from btype\n",
                      _token_4);
        MPEG4_algo_DCRaddressing_16x16_read_dot_intra(_actor_variables, _token_4);
        fsm_state = 5;
      } else {
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_read_dot_other: get from btype\n");
        _call_22 = btype->get();
        _token_3 = _call_22;
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_read_dot_other: got %i from btype\n",
                      _token_3);
        MPEG4_algo_DCRaddressing_16x16_read_dot_other(_actor_variables, _token_3);
        fsm_state = 2;
      }
    }
    break;
    }
    case 2: 
    {
    if (1) {
      MPEG4_algo_DCRaddressing_16x16_advance(_actor_variables);
      fsm_state = 1;
    }
    break;
    }
    case 3: 
    {
    libcal_printf("action MPEG4_algo_DCRaddressing_16x16_geth: get from btype\n");
    _call_23 = btype->get();
    _token_1 = _call_23;
    libcal_printf("action MPEG4_algo_DCRaddressing_16x16_geth: got %i from btype\n",
                  _token_1);
    MPEG4_algo_DCRaddressing_16x16_geth(_actor_variables, _token_1);
    fsm_state = 1;
    break;
    }
    case 4: 
    {
    libcal_printf("action MPEG4_algo_DCRaddressing_16x16_getw: get from btype\n");
    _call_24 = btype->get();
    _token_2 = _call_24;
    libcal_printf("action MPEG4_algo_DCRaddressing_16x16_getw: got %i from btype\n",
                  _token_2);
    MPEG4_algo_DCRaddressing_16x16_getw(_actor_variables, _token_2);
    fsm_state = 3;
    break;
    }
    case 5: 
    {
    if (_actor_variables->comp == 0) {
      MPEG4_algo_DCRaddressing_16x16_predict_dot_b0(_actor_variables, & _out_10, & _out_11,
                                                    & _out_12);
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b0: put value %i to A\n",
                    _out_10);
      A->put(_out_10);
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b0: put to A OK\n");
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b0: put value %i to B\n",
                    _out_11);
      B->put(_out_11);
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b0: put to B OK\n");
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b0: put value %i to C\n",
                    _out_12);
      C->put(_out_12);
      libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b0: put to C OK\n");
      fsm_state = 2;
    } else {
      if (_actor_variables->comp == 1) {
        MPEG4_algo_DCRaddressing_16x16_predict_dot_b1(_actor_variables, & _out_7,
                                                      & _out_8, & _out_9);
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b1: put value %i to A\n",
                      _out_7);
        A->put(_out_7);
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b1: put to A OK\n");
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b1: put value %i to B\n",
                      _out_8);
        B->put(_out_8);
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b1: put to B OK\n");
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b1: put value %i to C\n",
                      _out_9);
        C->put(_out_9);
        libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b1: put to C OK\n");
        fsm_state = 2;
      } else {
        if (_actor_variables->comp == 2) {
          MPEG4_algo_DCRaddressing_16x16_predict_dot_b2(_actor_variables, & _out_4,
                                                        & _out_5, & _out_6);
          libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b2: put value %i to A\n",
                        _out_4);
          A->put(_out_4);
          libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b2: put to A OK\n");
          libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b2: put value %i to B\n",
                        _out_5);
          B->put(_out_5);
          libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b2: put to B OK\n");
          libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b2: put value %i to C\n",
                        _out_6);
          C->put(_out_6);
          libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict_dot_b2: put to C OK\n");
          fsm_state = 2;
        } else {
          if (_actor_variables->comp == 3) {
            MPEG4_algo_DCRaddressing_16x16_predict(_actor_variables, & _out_1, & _out_2,
                                                   & _out_3);
            libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict: put value %i to A\n",
                          _out_1);
            A->put(_out_1);
            libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict: put to A OK\n");
            libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict: put value %i to B\n",
                          _out_2);
            B->put(_out_2);
            libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict: put to B OK\n");
            libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict: put value %i to C\n",
                          _out_3);
            C->put(_out_3);
            libcal_printf("action MPEG4_algo_DCRaddressing_16x16_predict: put to C OK\n");
            fsm_state = 2;
          }
        }
      }
    }
    break;
    }
    }
  }
}
}

}
